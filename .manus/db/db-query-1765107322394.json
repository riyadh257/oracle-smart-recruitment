{
  "query": "CREATE TABLE IF NOT EXISTS automation_triggers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employer_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  event_type ENUM('application_received', 'interview_scheduled', 'interview_completed', 'offer_extended', 'offer_accepted', 'offer_rejected', 'candidate_registered') NOT NULL,\n  template_id INT NOT NULL,\n  is_active BOOLEAN DEFAULT TRUE NOT NULL,\n  conditions TEXT,\n  delay_minutes INT DEFAULT 0,\n  times_triggered INT DEFAULT 0 NOT NULL,\n  last_triggered_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS automation_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  trigger_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  event_type VARCHAR(100) NOT NULL,\n  status ENUM('pending', 'sent', 'failed') NOT NULL,\n  email_sent BOOLEAN DEFAULT FALSE NOT NULL,\n  error_message TEXT,\n  executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS sms_campaigns (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employer_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  message TEXT NOT NULL,\n  status ENUM('draft', 'scheduled', 'sending', 'completed', 'cancelled') DEFAULT 'draft' NOT NULL,\n  segmentation_rules TEXT,\n  scheduled_at TIMESTAMP NULL,\n  completed_at TIMESTAMP NULL,\n  total_recipients INT DEFAULT 0 NOT NULL,\n  sent_count INT DEFAULT 0 NOT NULL,\n  delivered_count INT DEFAULT 0 NOT NULL,\n  failed_count INT DEFAULT 0 NOT NULL,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS sms_campaign_recipients (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  campaign_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  phone_number VARCHAR(20) NOT NULL,\n  status ENUM('pending', 'sent', 'delivered', 'failed') DEFAULT 'pending' NOT NULL,\n  sent_at TIMESTAMP NULL,\n  delivered_at TIMESTAMP NULL,\n  error_message TEXT\n);\n\nCREATE TABLE IF NOT EXISTS engagement_alert_configs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employer_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  is_active BOOLEAN DEFAULT TRUE NOT NULL,\n  min_engagement_score INT DEFAULT 60 NOT NULL,\n  score_drop_threshold INT DEFAULT 20 NOT NULL,\n  time_window_days INT DEFAULT 7 NOT NULL,\n  notify_email BOOLEAN DEFAULT TRUE NOT NULL,\n  notify_in_app BOOLEAN DEFAULT TRUE NOT NULL,\n  recipient_emails TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS engagement_alerts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  config_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  previous_score INT NOT NULL,\n  current_score INT NOT NULL,\n  score_drop INT NOT NULL,\n  alert_level ENUM('warning', 'critical') NOT NULL,\n  status ENUM('new', 'acknowledged', 'resolved') DEFAULT 'new' NOT NULL,\n  acknowledged_by INT,\n  acknowledged_at TIMESTAMP NULL,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3HwZw1vuDqLodBY.root --database hjcHA4SjAwhM6aP28vcAkH --execute CREATE TABLE IF NOT EXISTS automation_triggers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employer_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  event_type ENUM('application_received', 'interview_scheduled', 'interview_completed', 'offer_extended', 'offer_accepted', 'offer_rejected', 'candidate_registered') NOT NULL,\n  template_id INT NOT NULL,\n  is_active BOOLEAN DEFAULT TRUE NOT NULL,\n  conditions TEXT,\n  delay_minutes INT DEFAULT 0,\n  times_triggered INT DEFAULT 0 NOT NULL,\n  last_triggered_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS automation_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  trigger_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  event_type VARCHAR(100) NOT NULL,\n  status ENUM('pending', 'sent', 'failed') NOT NULL,\n  email_sent BOOLEAN DEFAULT FALSE NOT NULL,\n  error_message TEXT,\n  executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS sms_campaigns (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employer_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  message TEXT NOT NULL,\n  status ENUM('draft', 'scheduled', 'sending', 'completed', 'cancelled') DEFAULT 'draft' NOT NULL,\n  segmentation_rules TEXT,\n  scheduled_at TIMESTAMP NULL,\n  completed_at TIMESTAMP NULL,\n  total_recipients INT DEFAULT 0 NOT NULL,\n  sent_count INT DEFAULT 0 NOT NULL,\n  delivered_count INT DEFAULT 0 NOT NULL,\n  failed_count INT DEFAULT 0 NOT NULL,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS sms_campaign_recipients (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  campaign_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  phone_number VARCHAR(20) NOT NULL,\n  status ENUM('pending', 'sent', 'delivered', 'failed') DEFAULT 'pending' NOT NULL,\n  sent_at TIMESTAMP NULL,\n  delivered_at TIMESTAMP NULL,\n  error_message TEXT\n);\n\nCREATE TABLE IF NOT EXISTS engagement_alert_configs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employer_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  is_active BOOLEAN DEFAULT TRUE NOT NULL,\n  min_engagement_score INT DEFAULT 60 NOT NULL,\n  score_drop_threshold INT DEFAULT 20 NOT NULL,\n  time_window_days INT DEFAULT 7 NOT NULL,\n  notify_email BOOLEAN DEFAULT TRUE NOT NULL,\n  notify_in_app BOOLEAN DEFAULT TRUE NOT NULL,\n  recipient_emails TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS engagement_alerts (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  config_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  previous_score INT NOT NULL,\n  current_score INT NOT NULL,\n  score_drop INT NOT NULL,\n  alert_level ENUM('warning', 'critical') NOT NULL,\n  status ENUM('new', 'acknowledged', 'resolved') DEFAULT 'new' NOT NULL,\n  acknowledged_by INT,\n  acknowledged_at TIMESTAMP NULL,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3334
}