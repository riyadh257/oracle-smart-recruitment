{
  "query": "-- Phase 208: Email A/B Testing Tables\nCREATE TABLE IF NOT EXISTS ab_tests (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  email_template_id INT,\n  status ENUM('draft', 'running', 'paused', 'completed') DEFAULT 'draft' NOT NULL,\n  start_date TIMESTAMP NULL,\n  end_date TIMESTAMP NULL,\n  winner_variant_id INT,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS ab_test_variants (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  test_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  subject VARCHAR(500) NOT NULL,\n  content TEXT NOT NULL,\n  traffic_percentage INT NOT NULL DEFAULT 50,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS ab_test_results (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  test_id INT NOT NULL,\n  variant_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  opened_at TIMESTAMP NULL,\n  clicked_at TIMESTAMP NULL,\n  converted_at TIMESTAMP NULL\n);\n\nCREATE TABLE IF NOT EXISTS ab_test_metrics (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  test_id INT NOT NULL,\n  variant_id INT NOT NULL,\n  total_sent INT NOT NULL DEFAULT 0,\n  total_opened INT NOT NULL DEFAULT 0,\n  total_clicked INT NOT NULL DEFAULT 0,\n  total_converted INT NOT NULL DEFAULT 0,\n  open_rate INT NOT NULL DEFAULT 0,\n  click_rate INT NOT NULL DEFAULT 0,\n  conversion_rate INT NOT NULL DEFAULT 0,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS recording_comparisons (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  recording_ids TEXT NOT NULL,\n  comparison_data TEXT,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS push_notification_triggers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  trigger_type ENUM('application_status', 'interview_reminder', 'document_request', 'offer_update', 'custom') NOT NULL,\n  `condition` TEXT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  body TEXT NOT NULL,\n  data TEXT,\n  is_active INT NOT NULL DEFAULT 1,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS push_notification_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  trigger_id INT,\n  device_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  body TEXT NOT NULL,\n  data TEXT,\n  status ENUM('sent', 'delivered', 'failed', 'opened') NOT NULL,\n  sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  delivered_at TIMESTAMP NULL,\n  opened_at TIMESTAMP NULL,\n  error_message TEXT\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3HwZw1vuDqLodBY.root --database hjcHA4SjAwhM6aP28vcAkH --execute -- Phase 208: Email A/B Testing Tables\nCREATE TABLE IF NOT EXISTS ab_tests (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  email_template_id INT,\n  status ENUM('draft', 'running', 'paused', 'completed') DEFAULT 'draft' NOT NULL,\n  start_date TIMESTAMP NULL,\n  end_date TIMESTAMP NULL,\n  winner_variant_id INT,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS ab_test_variants (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  test_id INT NOT NULL,\n  name VARCHAR(255) NOT NULL,\n  subject VARCHAR(500) NOT NULL,\n  content TEXT NOT NULL,\n  traffic_percentage INT NOT NULL DEFAULT 50,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS ab_test_results (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  test_id INT NOT NULL,\n  variant_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  opened_at TIMESTAMP NULL,\n  clicked_at TIMESTAMP NULL,\n  converted_at TIMESTAMP NULL\n);\n\nCREATE TABLE IF NOT EXISTS ab_test_metrics (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  test_id INT NOT NULL,\n  variant_id INT NOT NULL,\n  total_sent INT NOT NULL DEFAULT 0,\n  total_opened INT NOT NULL DEFAULT 0,\n  total_clicked INT NOT NULL DEFAULT 0,\n  total_converted INT NOT NULL DEFAULT 0,\n  open_rate INT NOT NULL DEFAULT 0,\n  click_rate INT NOT NULL DEFAULT 0,\n  conversion_rate INT NOT NULL DEFAULT 0,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS recording_comparisons (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  recording_ids TEXT NOT NULL,\n  comparison_data TEXT,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS push_notification_triggers (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  trigger_type ENUM('application_status', 'interview_reminder', 'document_request', 'offer_update', 'custom') NOT NULL,\n  `condition` TEXT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  body TEXT NOT NULL,\n  data TEXT,\n  is_active INT NOT NULL DEFAULT 1,\n  created_by INT NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS push_notification_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  trigger_id INT,\n  device_id INT NOT NULL,\n  candidate_id INT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  body TEXT NOT NULL,\n  data TEXT,\n  status ENUM('sent', 'delivered', 'failed', 'opened') NOT NULL,\n  sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  delivered_at TIMESTAMP NULL,\n  opened_at TIMESTAMP NULL,\n  error_message TEXT\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3772
}