{
  "query": "CREATE TABLE IF NOT EXISTS emailTemplateCategories (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  displayOrder INT DEFAULT 0,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS emailTemplateLibrary (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT,\n  categoryId INT,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  subject VARCHAR(500) NOT NULL,\n  bodyHtml TEXT NOT NULL,\n  bodyText TEXT,\n  thumbnailUrl VARCHAR(500),\n  isPublic BOOLEAN DEFAULT FALSE,\n  usageCount INT DEFAULT 0,\n  lastUsedAt TIMESTAMP NULL,\n  variables JSON,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (employerId) REFERENCES employers(id) ON DELETE CASCADE,\n  FOREIGN KEY (categoryId) REFERENCES emailTemplateCategories(id) ON DELETE SET NULL,\n  INDEX employerId_idx (employerId),\n  INDEX categoryId_idx (categoryId)\n);\n\nCREATE TABLE IF NOT EXISTS smsProviderConfigs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  provider ENUM('twilio', 'aws_sns') NOT NULL,\n  isActive BOOLEAN DEFAULT FALSE,\n  twilioAccountSid VARCHAR(255),\n  twilioAuthToken VARCHAR(255),\n  twilioPhoneNumber VARCHAR(50),\n  awsAccessKeyId VARCHAR(255),\n  awsSecretAccessKey VARCHAR(255),\n  awsRegion VARCHAR(50),\n  awsSnsTopicArn VARCHAR(500),\n  messagesSent INT DEFAULT 0,\n  messagesDelivered INT DEFAULT 0,\n  messagesFailed INT DEFAULT 0,\n  lastUsedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (employerId) REFERENCES employers(id) ON DELETE CASCADE,\n  INDEX employerId_idx (employerId)\n);\n\nCREATE TABLE IF NOT EXISTS candidateEngagementScores (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  candidateId INT NOT NULL,\n  totalEmailsSent INT DEFAULT 0,\n  totalEmailsOpened INT DEFAULT 0,\n  totalEmailsClicked INT DEFAULT 0,\n  totalSmsReceived INT DEFAULT 0,\n  totalApplications INT DEFAULT 0,\n  totalInterviewResponses INT DEFAULT 0,\n  totalProfileViews INT DEFAULT 0,\n  overallScore INT DEFAULT 0,\n  emailEngagementScore INT DEFAULT 0,\n  applicationEngagementScore INT DEFAULT 0,\n  interviewEngagementScore INT DEFAULT 0,\n  engagementLevel ENUM('very_high', 'high', 'medium', 'low', 'very_low') DEFAULT 'medium',\n  lastEngagementAt TIMESTAMP NULL,\n  firstEngagementAt TIMESTAMP NULL,\n  scoreCalculatedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (candidateId) REFERENCES candidates(id) ON DELETE CASCADE,\n  INDEX candidateId_idx (candidateId),\n  INDEX overallScore_idx (overallScore),\n  INDEX engagementLevel_idx (engagementLevel)\n);\n\nCREATE TABLE IF NOT EXISTS engagementScoreHistory (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  candidateId INT NOT NULL,\n  score INT NOT NULL,\n  engagementLevel ENUM('very_high', 'high', 'medium', 'low', 'very_low') NOT NULL,\n  recordedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (candidateId) REFERENCES candidates(id) ON DELETE CASCADE,\n  INDEX candidateId_idx (candidateId),\n  INDEX recordedAt_idx (recordedAt)\n)",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3HwZw1vuDqLodBY.root --database hjcHA4SjAwhM6aP28vcAkH --execute CREATE TABLE IF NOT EXISTS emailTemplateCategories (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  displayOrder INT DEFAULT 0,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS emailTemplateLibrary (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT,\n  categoryId INT,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  subject VARCHAR(500) NOT NULL,\n  bodyHtml TEXT NOT NULL,\n  bodyText TEXT,\n  thumbnailUrl VARCHAR(500),\n  isPublic BOOLEAN DEFAULT FALSE,\n  usageCount INT DEFAULT 0,\n  lastUsedAt TIMESTAMP NULL,\n  variables JSON,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (employerId) REFERENCES employers(id) ON DELETE CASCADE,\n  FOREIGN KEY (categoryId) REFERENCES emailTemplateCategories(id) ON DELETE SET NULL,\n  INDEX employerId_idx (employerId),\n  INDEX categoryId_idx (categoryId)\n);\n\nCREATE TABLE IF NOT EXISTS smsProviderConfigs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  provider ENUM('twilio', 'aws_sns') NOT NULL,\n  isActive BOOLEAN DEFAULT FALSE,\n  twilioAccountSid VARCHAR(255),\n  twilioAuthToken VARCHAR(255),\n  twilioPhoneNumber VARCHAR(50),\n  awsAccessKeyId VARCHAR(255),\n  awsSecretAccessKey VARCHAR(255),\n  awsRegion VARCHAR(50),\n  awsSnsTopicArn VARCHAR(500),\n  messagesSent INT DEFAULT 0,\n  messagesDelivered INT DEFAULT 0,\n  messagesFailed INT DEFAULT 0,\n  lastUsedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (employerId) REFERENCES employers(id) ON DELETE CASCADE,\n  INDEX employerId_idx (employerId)\n);\n\nCREATE TABLE IF NOT EXISTS candidateEngagementScores (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  candidateId INT NOT NULL,\n  totalEmailsSent INT DEFAULT 0,\n  totalEmailsOpened INT DEFAULT 0,\n  totalEmailsClicked INT DEFAULT 0,\n  totalSmsReceived INT DEFAULT 0,\n  totalApplications INT DEFAULT 0,\n  totalInterviewResponses INT DEFAULT 0,\n  totalProfileViews INT DEFAULT 0,\n  overallScore INT DEFAULT 0,\n  emailEngagementScore INT DEFAULT 0,\n  applicationEngagementScore INT DEFAULT 0,\n  interviewEngagementScore INT DEFAULT 0,\n  engagementLevel ENUM('very_high', 'high', 'medium', 'low', 'very_low') DEFAULT 'medium',\n  lastEngagementAt TIMESTAMP NULL,\n  firstEngagementAt TIMESTAMP NULL,\n  scoreCalculatedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (candidateId) REFERENCES candidates(id) ON DELETE CASCADE,\n  INDEX candidateId_idx (candidateId),\n  INDEX overallScore_idx (overallScore),\n  INDEX engagementLevel_idx (engagementLevel)\n);\n\nCREATE TABLE IF NOT EXISTS engagementScoreHistory (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  candidateId INT NOT NULL,\n  score INT NOT NULL,\n  engagementLevel ENUM('very_high', 'high', 'medium', 'low', 'very_low') NOT NULL,\n  recordedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (candidateId) REFERENCES candidates(id) ON DELETE CASCADE,\n  INDEX candidateId_idx (candidateId),\n  INDEX recordedAt_idx (recordedAt)\n)",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3282
}