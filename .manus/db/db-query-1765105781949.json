{
  "query": "CREATE TABLE IF NOT EXISTS emailEvents (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  emailAnalyticsId INT,\n  campaignId INT,\n  abTestId INT,\n  variantId INT,\n  eventType ENUM('sent', 'delivered', 'opened', 'clicked', 'bounced', 'complained', 'unsubscribed') NOT NULL,\n  recipientEmail VARCHAR(320) NOT NULL,\n  candidateId INT,\n  emailType ENUM('interview_invite', 'interview_reminder', 'application_received', 'application_update', 'job_match', 'rejection', 'follow_up', 'broadcast', 'custom') NOT NULL,\n  subject TEXT,\n  linkUrl TEXT,\n  linkPosition INT,\n  userAgent TEXT,\n  ipAddress VARCHAR(45),\n  deviceType ENUM('desktop', 'mobile', 'tablet', 'unknown'),\n  eventTimestamp TIMESTAMP NOT NULL,\n  hourOfDay INT,\n  dayOfWeek INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX employerId_idx (employerId),\n  INDEX campaignId_idx (campaignId),\n  INDEX abTestId_idx (abTestId),\n  INDEX eventType_idx (eventType),\n  INDEX emailType_idx (emailType),\n  INDEX candidateId_idx (candidateId),\n  INDEX eventTimestamp_idx (eventTimestamp),\n  INDEX hourOfDay_idx (hourOfDay),\n  INDEX dayOfWeek_idx (dayOfWeek)\n);\n\nCREATE TABLE IF NOT EXISTS broadcastMessages (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  createdBy INT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  messageType ENUM('sms', 'whatsapp', 'email') NOT NULL,\n  messageContent TEXT NOT NULL,\n  emailSubject VARCHAR(500),\n  emailHtml TEXT,\n  targetAudience ENUM('all_candidates', 'filtered', 'manual_selection') DEFAULT 'all_candidates' NOT NULL,\n  filterCriteria JSON,\n  status ENUM('draft', 'scheduled', 'sending', 'sent', 'failed', 'cancelled') DEFAULT 'draft' NOT NULL,\n  scheduledAt TIMESTAMP NULL,\n  sentAt TIMESTAMP NULL,\n  totalRecipients INT DEFAULT 0,\n  successCount INT DEFAULT 0,\n  failureCount INT DEFAULT 0,\n  estimatedCost INT DEFAULT 0,\n  actualCost INT DEFAULT 0,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX employerId_idx (employerId),\n  INDEX createdBy_idx (createdBy),\n  INDEX status_idx (status),\n  INDEX messageType_idx (messageType),\n  INDEX scheduledAt_idx (scheduledAt)\n);\n\nCREATE TABLE IF NOT EXISTS broadcastRecipients (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  broadcastId INT NOT NULL,\n  candidateId INT,\n  recipientName VARCHAR(255),\n  recipientEmail VARCHAR(320),\n  recipientPhone VARCHAR(50),\n  deliveryStatus ENUM('pending', 'sent', 'delivered', 'failed', 'bounced', 'opted_out') DEFAULT 'pending' NOT NULL,\n  sentAt TIMESTAMP NULL,\n  deliveredAt TIMESTAMP NULL,\n  failureReason TEXT,\n  opened BOOLEAN DEFAULT FALSE,\n  openedAt TIMESTAMP NULL,\n  clicked BOOLEAN DEFAULT FALSE,\n  clickedAt TIMESTAMP NULL,\n  externalMessageId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX broadcastId_idx (broadcastId),\n  INDEX candidateId_idx (candidateId),\n  INDEX deliveryStatus_idx (deliveryStatus)\n);\n\nCREATE TABLE IF NOT EXISTS abTestResults (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  testId INT NOT NULL,\n  startedAt TIMESTAMP NULL,\n  completedAt TIMESTAMP NULL,\n  testDuration INT,\n  winnerVariantId INT,\n  winnerDeterminedAt TIMESTAMP NULL,\n  winnerDeterminedBy ENUM('automatic', 'manual'),\n  statisticalSignificance INT DEFAULT 0,\n  pValue INT DEFAULT 0,\n  confidenceLevel INT DEFAULT 95,\n  variantAOpenRate INT DEFAULT 0,\n  variantBOpenRate INT DEFAULT 0,\n  variantAClickRate INT DEFAULT 0,\n  variantBClickRate INT DEFAULT 0,\n  relativeImprovement INT DEFAULT 0,\n  absoluteImprovement INT DEFAULT 0,\n  recommendation TEXT,\n  appliedToProduction BOOLEAN DEFAULT FALSE,\n  appliedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX testId_idx (testId),\n  INDEX winnerVariantId_idx (winnerVariantId),\n  INDEX appliedToProduction_idx (appliedToProduction)\n);\n\nCREATE TABLE IF NOT EXISTS optimalSendTimes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  emailType ENUM('interview_invite', 'interview_reminder', 'application_received', 'application_update', 'job_match', 'rejection', 'follow_up', 'broadcast', 'custom') NOT NULL,\n  candidateSegment VARCHAR(100),\n  optimalDayOfWeek INT NOT NULL,\n  optimalHourOfDay INT NOT NULL,\n  avgOpenRate INT DEFAULT 0,\n  avgClickRate INT DEFAULT 0,\n  sampleSize INT DEFAULT 0,\n  confidenceScore INT DEFAULT 0,\n  analysisStartDate TIMESTAMP NOT NULL,\n  analysisEndDate TIMESTAMP NOT NULL,\n  lastCalculated TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX employerId_idx (employerId),\n  INDEX emailType_idx (emailType),\n  INDEX candidateSegment_idx (candidateSegment)\n)",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3HwZw1vuDqLodBY.root --database hjcHA4SjAwhM6aP28vcAkH --execute CREATE TABLE IF NOT EXISTS emailEvents (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  emailAnalyticsId INT,\n  campaignId INT,\n  abTestId INT,\n  variantId INT,\n  eventType ENUM('sent', 'delivered', 'opened', 'clicked', 'bounced', 'complained', 'unsubscribed') NOT NULL,\n  recipientEmail VARCHAR(320) NOT NULL,\n  candidateId INT,\n  emailType ENUM('interview_invite', 'interview_reminder', 'application_received', 'application_update', 'job_match', 'rejection', 'follow_up', 'broadcast', 'custom') NOT NULL,\n  subject TEXT,\n  linkUrl TEXT,\n  linkPosition INT,\n  userAgent TEXT,\n  ipAddress VARCHAR(45),\n  deviceType ENUM('desktop', 'mobile', 'tablet', 'unknown'),\n  eventTimestamp TIMESTAMP NOT NULL,\n  hourOfDay INT,\n  dayOfWeek INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  INDEX employerId_idx (employerId),\n  INDEX campaignId_idx (campaignId),\n  INDEX abTestId_idx (abTestId),\n  INDEX eventType_idx (eventType),\n  INDEX emailType_idx (emailType),\n  INDEX candidateId_idx (candidateId),\n  INDEX eventTimestamp_idx (eventTimestamp),\n  INDEX hourOfDay_idx (hourOfDay),\n  INDEX dayOfWeek_idx (dayOfWeek)\n);\n\nCREATE TABLE IF NOT EXISTS broadcastMessages (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  createdBy INT NOT NULL,\n  title VARCHAR(255) NOT NULL,\n  messageType ENUM('sms', 'whatsapp', 'email') NOT NULL,\n  messageContent TEXT NOT NULL,\n  emailSubject VARCHAR(500),\n  emailHtml TEXT,\n  targetAudience ENUM('all_candidates', 'filtered', 'manual_selection') DEFAULT 'all_candidates' NOT NULL,\n  filterCriteria JSON,\n  status ENUM('draft', 'scheduled', 'sending', 'sent', 'failed', 'cancelled') DEFAULT 'draft' NOT NULL,\n  scheduledAt TIMESTAMP NULL,\n  sentAt TIMESTAMP NULL,\n  totalRecipients INT DEFAULT 0,\n  successCount INT DEFAULT 0,\n  failureCount INT DEFAULT 0,\n  estimatedCost INT DEFAULT 0,\n  actualCost INT DEFAULT 0,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX employerId_idx (employerId),\n  INDEX createdBy_idx (createdBy),\n  INDEX status_idx (status),\n  INDEX messageType_idx (messageType),\n  INDEX scheduledAt_idx (scheduledAt)\n);\n\nCREATE TABLE IF NOT EXISTS broadcastRecipients (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  broadcastId INT NOT NULL,\n  candidateId INT,\n  recipientName VARCHAR(255),\n  recipientEmail VARCHAR(320),\n  recipientPhone VARCHAR(50),\n  deliveryStatus ENUM('pending', 'sent', 'delivered', 'failed', 'bounced', 'opted_out') DEFAULT 'pending' NOT NULL,\n  sentAt TIMESTAMP NULL,\n  deliveredAt TIMESTAMP NULL,\n  failureReason TEXT,\n  opened BOOLEAN DEFAULT FALSE,\n  openedAt TIMESTAMP NULL,\n  clicked BOOLEAN DEFAULT FALSE,\n  clickedAt TIMESTAMP NULL,\n  externalMessageId VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX broadcastId_idx (broadcastId),\n  INDEX candidateId_idx (candidateId),\n  INDEX deliveryStatus_idx (deliveryStatus)\n);\n\nCREATE TABLE IF NOT EXISTS abTestResults (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  testId INT NOT NULL,\n  startedAt TIMESTAMP NULL,\n  completedAt TIMESTAMP NULL,\n  testDuration INT,\n  winnerVariantId INT,\n  winnerDeterminedAt TIMESTAMP NULL,\n  winnerDeterminedBy ENUM('automatic', 'manual'),\n  statisticalSignificance INT DEFAULT 0,\n  pValue INT DEFAULT 0,\n  confidenceLevel INT DEFAULT 95,\n  variantAOpenRate INT DEFAULT 0,\n  variantBOpenRate INT DEFAULT 0,\n  variantAClickRate INT DEFAULT 0,\n  variantBClickRate INT DEFAULT 0,\n  relativeImprovement INT DEFAULT 0,\n  absoluteImprovement INT DEFAULT 0,\n  recommendation TEXT,\n  appliedToProduction BOOLEAN DEFAULT FALSE,\n  appliedAt TIMESTAMP NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX testId_idx (testId),\n  INDEX winnerVariantId_idx (winnerVariantId),\n  INDEX appliedToProduction_idx (appliedToProduction)\n);\n\nCREATE TABLE IF NOT EXISTS optimalSendTimes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  employerId INT NOT NULL,\n  emailType ENUM('interview_invite', 'interview_reminder', 'application_received', 'application_update', 'job_match', 'rejection', 'follow_up', 'broadcast', 'custom') NOT NULL,\n  candidateSegment VARCHAR(100),\n  optimalDayOfWeek INT NOT NULL,\n  optimalHourOfDay INT NOT NULL,\n  avgOpenRate INT DEFAULT 0,\n  avgClickRate INT DEFAULT 0,\n  sampleSize INT DEFAULT 0,\n  confidenceScore INT DEFAULT 0,\n  analysisStartDate TIMESTAMP NOT NULL,\n  analysisEndDate TIMESTAMP NOT NULL,\n  lastCalculated TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  INDEX employerId_idx (employerId),\n  INDEX emailType_idx (emailType),\n  INDEX candidateSegment_idx (candidateSegment)\n)",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3209
}